<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sign In</title>
    <link rel="icon" type="image/png" th:href="@{/webjars//open-iconic/1.1.1/png/dashboard-4x.png}">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<th:block th:replace="fragments/cssLinks :: cssLinks"></th:block>    
	<script th:src="@{/webjars/jquery/3.1.0/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/4.2.1/js/bootstrap.min.js}"></script>
    
<script th:inline="javascript" type="text/javascript">
	function validateForm(){
		if ($('#inputEmail').value!=="" && $('#inputPassword').value!==""){
			$('#loginButton').attr("disabled", false);
		}
		else{
			$('#loginButton').attr("disabled", true);
		} 
	}
</script>

</head>

<body>
<form class="form-narrow form-horizontal" action="#" method="post" th:action="@{/authenticate}">
    <th:block th:if="${param.error != null}">
        <div th:replace="fragments/alert :: alert (type='danger', message='Sign in error. Please try again.')">Alert</div>
    </th:block>
    
    <fieldset>
        <legend>Please Sign In</legend>
        <div class="form-group">
            <label for="inputEmail" class="col-lg-2 control-label">Email</label>
            <div class="col-lg-10">
                <input type="text" class="form-control" id="inputEmail" placeholder="Email" name="username" onkeyup="validateForm()"/>
            </div>
        </div>
        <div class="form-group">
            <label for="inputPassword" class="col-lg-2 control-label">Password</label>
            <div class="col-lg-10">
                <input type="password" class="form-control" id="inputPassword" placeholder="Password" name="password" onkeyup="validateForm()"/>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="_spring_security_remember_me" /> Remember me
                    </label>
                </div>
            </div>
        </div>
        <p th:if="${param.error != null}" th:utext="#{badCredentials.message}" class='text-danger'></p>
        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <button id="loginButton" type="submit" class="btn btn-primary" disabled>Sign in</button>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <p><a href="remindPassword" th:href="@{/remindPassword}">Forgot your password?</a></p>
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
                <p>New here? <a href="signup" th:href="@{/signup}">Sign Up</a></p>
            </div>
        </div>
    </fieldset>
</form>
</body>
</html>